# 🎸 Chord Analyzer

コード推定機械学習モデルを使用した音楽コード分析アプリケーションです。Streamlitで構築されたWebアプリケーションで、音声ファイルからコード進行を自動分析し、視覚的に結果を表示します。

## ✨ 機能

### 🎵 基本機能
- **音声ファイルアップロード**: MP3, WAV, FLAC, M4A, OGG形式に対応
- **コード進行分析**: コード推定機械学習モデルを使用した高精度なコード検出
- **リアルタイム分析**: プログレスバー付きの分析進行状況表示
- **結果表示**: タイムライン、分布図、統計情報の表示

### 📊 分析機能
- **コード進行タイムライン**: 時間軸でのコード進行の可視化
- **コード分布分析**: 各コードの出現頻度と分布
- **統計情報**: 総コード数、ユニークコード数、最頻出コードなど
- **コード進行サマリー**: コード進行の文字列表現

### 🔬 高度な分析機能
- **スペクトログラム分析**: メルスペクトログラムの可視化
- **コード進行パターン**: 2コードの組み合わせパターン分析
- **音楽的特徴分析**: メジャー/マイナーコードの割合、複雑さスコア
- **統計分析**: 詳細な統計情報と円グラフ表示

### 💾 エクスポート機能
- **CSVエクスポート**: コード進行データのCSV形式ダウンロード
- **JSONエクスポート**: 分析結果のJSON形式ダウンロード
- **PDFエクスポート**: 分析結果のPDF形式ダウンロード（開発中）

## 🚀 セットアップ

### 1. 環境構築

```bash
# リポジトリをクローン
git clone <repository-url>
cd chord-analyzer

# 仮想環境を作成（推奨）
python -m venv venv
source venv/bin/activate  # Linux/Mac
# または
venv\Scripts\activate  # Windows

# 依存関係をインストール
pip install -r requirements.txt
```

### 2. アプリケーションの起動

```bash
streamlit run app.py
```

ブラウザで `http://localhost:8501` にアクセスしてアプリケーションを使用できます。

## 📁 プロジェクト構造

```
chord-analyzer/
├── app.py                          # メインアプリケーション
├── requirements.txt                 # 依存関係
├── README.md                       # プロジェクト説明
├── components/                     # UIコンポーネント
│   ├── audio_uploader.py          # 音声ファイルアップロード
│   ├── analysis_display.py        # 分析結果表示
│   └── sidebar.py                 # サイドバー
├── utils/                         # ユーティリティ
│   └── chord_analyzer.py          # コード分析エンジン
└── pages/                         # 追加ページ
    └── advanced_analysis.py       # 高度な分析機能
```

## 🛠️ 技術スタック

- **Streamlit**: Webアプリケーションフレームワーク
- **madmom**: 音楽分析ライブラリ
- **librosa**: 音声処理ライブラリ
- **plotly**: インタラクティブな可視化
- **pandas**: データ処理
- **numpy**: 数値計算

## 📖 使用方法

### 1. 音声ファイルのアップロード
- アプリケーションを起動
- 「音声ファイルをアップロード」セクションでファイルを選択
- 対応形式: MP3, WAV, FLAC, M4A, OGG

### 2. コード分析の実行
- 「コード分析を開始」ボタンをクリック
- 分析精度を選択（高精度/標準/高速）
- プログレスバーで進行状況を確認

### 3. 結果の確認
- **タイムライン**: 時間軸でのコード進行
- **分布図**: コードの出現頻度
- **統計情報**: 詳細な統計データ
- **サマリー**: コード進行の概要

### 4. 高度な分析
- 「高度な分析」タブで追加機能を利用
- スペクトログラム分析
- コード進行パターン分析
- 統計分析
- 音楽的特徴分析

### 5. 結果のエクスポート
- サイドバーでエクスポート形式を選択
- CSV、JSON、PDF形式でダウンロード

## ⚙️ 設定

### 分析精度
- **高精度**: より正確な結果、処理時間が長い
- **標準**: バランスの取れた設定
- **高速**: 高速処理、精度はやや低い

### 表示設定
- **タイムライン表示**: コード進行のタイムライン表示
- **分布図表示**: コード分布のグラフ表示
- **統計情報表示**: 統計データの表示

## 🔧 カスタマイズ

### 新しい分析機能の追加
1. `utils/` ディレクトリに新しい分析クラスを作成
2. `components/` ディレクトリにUIコンポーネントを追加
3. `app.py` で新しい機能を統合

### UIのカスタマイズ
- `components/` ディレクトリのファイルを編集
- Streamlitのコンポーネントを使用してカスタマイズ

## 🐛 トラブルシューティング

### よくある問題

1. **madmomのインストールエラー**
   ```bash
   # システム依存関係をインストール
   sudo apt-get install libsndfile1-dev
   pip install madmom
   ```

2. **音声ファイルの読み込みエラー**
   - ファイル形式が対応しているか確認
   - ファイルが破損していないか確認

3. **分析結果が表示されない**
   - 音声ファイルが正常にアップロードされているか確認
   - ブラウザのコンソールでエラーメッセージを確認

## 🤝 貢献

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 謝辞

- [madmom](https://github.com/CPJKU/madmom) - 音楽分析ライブラリ
- [Streamlit](https://streamlit.io/) - Webアプリケーションフレームワーク
- [librosa](https://librosa.org/) - 音声処理ライブラリ

## 📞 サポート

問題や質問がある場合は、GitHubのIssuesページで報告してください。 